UserAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36 Edge/18.17763

Steps to reproduce the problem:
1. I'm currently using V8 debug build with version 7.3.0 (d8-linux-debug-v8-component-58294)
2. OS: x86_64 Linux 4.15.0 / Ubuntu 18.04 
3. Run the PoC with D8 debug build, for example : d8-linux-debug-v8-component-58294/d8 poc.js

What is the expected behavior?

1. An assert:
	abort: CSA_ASSERT failed: IsStrong(object) [../../src/code-stub-assembler.cc:1333]

		==== JS stack trace =========================================

		    0: ExitFrame [pc: 0x7fe2a2508472]
		    1: StubFrame [pc: 0x7fe2a22d174c]
		Security context: 0x05be4e69b039 <JSObject>#0#
		/* ... */

2. Segmentation fault

	(gdb) r test.js
	The program being debugged has been started already.
	Start it from the beginning? (y or n) y
	Starting program: [...]/d8 test.js
	[Thread debugging using libthread_db enabled]
	Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
	[New Thread 0x7ffff44f5700 (LWP 4370)]
	[New Thread 0x7ffff3cf4700 (LWP 4371)]
	[New Thread 0x7ffff34f3700 (LWP 4372)]
	[New Thread 0x7ffff2cf2700 (LWP 4373)]
	[New Thread 0x7ffff24f1700 (LWP 4374)]

	Thread 1 "d8" received signal SIGSEGV, Segmentation fault.
	0x00007ffff7866aab in Builtins_StoreIC ()
	   from [...]/./libv8.so
	(gdb) disas $rip
	Dump of assembler code for function Builtins_StoreIC:

   0x00007ffff78669e0 <+0>:	push   rbp
   0x00007ffff78669e1 <+1>:	mov    rbp,rsp
   0x00007ffff78669e4 <+4>:	push   0x18
   0x00007ffff78669e6 <+6>:	sub    rsp,0x70
   0x00007ffff78669ea <+10>:	mov    QWORD PTR [rbp-0x20],rbx
   0x00007ffff78669ee <+14>:	mov    QWORD PTR [rbp-0x18],rdi
   0x00007ffff78669f2 <+18>:	mov    QWORD PTR [rbp-0x28],rdx
   0x00007ffff78669f6 <+22>:	mov    QWORD PTR [rbp-0x30],rcx
   0x00007ffff78669fa <+26>:	mov    QWORD PTR [rbp-0x38],rsi
   0x00007ffff78669fe <+30>:	mov    QWORD PTR [rbp-0x10],rax
   0x00007ffff7866a02 <+34>:	test   dl,0x1
   0x00007ffff7866a05 <+37>:	je     0x7ffff7866a21 <Builtins_StoreIC+65>
   0x00007ffff7866a07 <+39>:	mov    r8,rdx
   0x00007ffff7866a0a <+42>:	and    r8,0x3
   0x00007ffff7866a0e <+46>:	cmp    r8,0x1
   0x00007ffff7866a12 <+50>:	jne    0x7ffff786e09e <Builtins_StoreIC+30398>
   0x00007ffff7866a18 <+56>:	mov    r8,QWORD PTR [rdx-0x1]   <-- read HeapObject->map into R8
   0x00007ffff7866a1c <+60>:	mov    rdi,r8                   <-- RDI now is HeapObject->map
   0x00007ffff7866a1f <+63>:	jmp    0x7ffff7866a96 <Builtins_StoreIC+182> <--- jump

   [...]

   0x00007ffff7866a96 <+182>:	mov    rax,rdi
   0x00007ffff7866a99 <+185>:	and    rax,0x3
   0x00007ffff7866a9d <+189>:	mov    QWORD PTR [rbp-0x60],rdi
   0x00007ffff7866aa1 <+193>:	cmp    rax,0x1
   0x00007ffff7866aa5 <+197>:	jne    0x7ffff786e0b0 <Builtins_StoreIC+30416>
=> 0x00007ffff7866aab <+203>:	mov    rax,QWORD PTR [rdi-0x1]        <-- seg fault as RDI is an invalid addresss
   0x00007ffff7866aaf <+207>:	cmp    QWORD PTR [r13+0x8],rax
   0x00007ffff7866ab3 <+211>:	jne    0x7ffff786e0c2 <Builtins_StoreIC+30434>
   0x00007ffff7866ab9 <+217>:	mov    rax,rdi
   0x00007ffff7866abc <+220>:	and    rax,0x3
   0x00007ffff7866ac0 <+224>:	cmp    rax,0x1
   0x00007ffff7866ac4 <+228>:	jne    0x7ffff786e0d7 <Builtins_StoreIC+30455>
   0x00007ffff7866aca <+234>:	mov    rax,QWORD PTR [rdi-0x1]
   0x00007ffff7866ace <+238>:	cmp    QWORD PTR [r13+0x8],rax
   0x00007ffff7866ad2 <+242>:	jne    0x7ffff786e0e9 <Builtins_StoreIC+30473>
   0x00007ffff7866ad8 <+248>:	mov    rax,rdi
   0x00007ffff7866adb <+251>:	and    rax,0x3
   0x00007ffff7866adf <+255>:	cmp    rax,0x1
   0x00007ffff7866ae3 <+259>:	jne    0x7ffff786e0fe <Builtins_StoreIC+30494>
   0x00007ffff7866ae9 <+265>:	test   DWORD PTR [rdi+0xf],0x800000
   0x00007ffff7866af0 <+272>:	jne    0x7ffff7872125 <Builtins_StoreIC+46917>
   0x00007ffff7866af6 <+278>:	mov    rax,QWORD PTR [rbp-0x20]
   0x00007ffff7866afa <+282>:	and    rax,0x3
   0x00007ffff7866afe <+286>:	cmp    rax,0x1
   0x00007ffff7866b02 <+290>:	jne    0x7ffff786e110 <Builtins_StoreIC+30512>
   0x00007ffff7866b08 <+296>:	mov    rax,QWORD PTR [rbp-0x20]
   0x00007ffff7866b0c <+300>:	mov    rbx,QWORD PTR [rax-0x1]
   0x00007ffff7866b10 <+304>:	cmp    QWORD PTR [r13+0x90],rbx
   0x00007ffff7866b17 <+311>:	jne    0x7ffff786e122 <Builtins_StoreIC+30530>

    [...]

	(gdb) info register
	rax            0x1	1
	rbx            0x146062e9e0b1	22404208910513
	rcx            0x146062e9db59	22404208909145
	rdx            0x2ccade3a5501	49249823380737            <---- HeapObject
	rsi            0x146062e9ddd9	22404208909785
	rdi            0x5630bb480008c25d	6210669804056527453   <---- HeapObject->map
	rbp            0x7ffffff07470	0x7ffffff07470
	rsp            0x7ffffff073f8	0x7ffffff073f8
	r8             0x5630bb480008c25d	6210669804056527453
	r9             0x2ccade3a5501	49249823380737
	r10            0x7ffff7872832	140737346218034
	r11            0x900000000	38654705664
	r12            0x146062e9ddd9	22404208909785
	r13            0x5555555aa990	93824992586128
	r14            0x0	0
	r15            0x7ffffff07478	140737487336568
	rip            0x7ffff7866aab	0x7ffff7866aab <Builtins_StoreIC+203>
	eflags         0x10246	[ PF ZF IF RF ]
	cs             0x33	51
	ss             0x2b	43
	ds             0x0	0
	es             0x0	0
	fs             0x0	0
	gs             0x0	0

What went wrong?
	The crash happens on Builtins_StoreIC that is called by the JIT code generated for the function "go" to store the 
	value 0x41424344 in the property "a" for the variable v_in (poc line 13). While trying to write the property, 
	we'll read the HeapObject->Map to check the object type, however, v_in object is pointing to the 
	JIT code generated for the "go" function. It'll lead to the crash as it'll interpret instructions as a pointer to Map Object.

	You can confirm it by looking both the call stack and the RDX address (that is the pointer to HeapObject), 
	for example:

	(gdb) bt
	#0  0x00007ffff7866aab in Builtins_StoreIC ()
	from [...] /./libv8.so
	#1  0x00002ccade3a54f9 in ?? ()              <-- JIT code for "go" this is a trampoline to StoreIC
	#2  0x0000000000000000 in ?? ()

	(gdb) x/16i $rdx -1                          <-- RDX is 0x2ccade3a5501
	   0x2ccade3a5500:	pop    rbp
	   0x2ccade3a5501:	ret    0x8
	   0x2ccade3a5504:	movabs rbx,0x7ffff7375630
	   0x2ccade3a550e:	xor    eax,eax
	   0x2ccade3a5510:	movabs rsi,0x146062e81749
	   0x2ccade3a551a:	movabs r10,0x7ffff7a57b40
	   0x2ccade3a5524:	call   r10
	   0x2ccade3a5527:	jmp    0x2ccade3a52ad
	   0x2ccade3a552c:	mov    rdx,QWORD PTR [r13-0x28]
	   0x2ccade3a5530:	jmp    0x2ccade3a5637
	   0x2ccade3a5535:	mov    QWORD PTR [rbp-0x20],rcx
	   0x2ccade3a5539:	mov    rax,r11
	   0x2ccade3a553c:	mov    rbx,QWORD PTR [rbp-0x30]
	   0x2ccade3a5540:	movabs rsi,0x146062e81749
	   0x2ccade3a554a:	movabs r10,0x7ffff7904820
	   0x2ccade3a5554:	call   r10

Did this work before? N/A 

Chrome version: 64.0.3282.140  Channel: n/a
OS Version: 10.0
Flash Version: